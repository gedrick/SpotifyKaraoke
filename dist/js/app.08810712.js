(function(t){function e(e){for(var r,o,a=e[0],c=e[1],l=e[2],f=0,g=[];f<a.length;f++)o=a[f],Object.prototype.hasOwnProperty.call(s,o)&&s[o]&&g.push(s[o][0]),s[o]=0;for(r in c)Object.prototype.hasOwnProperty.call(c,r)&&(t[r]=c[r]);u&&u(e);while(g.length)g.shift()();return i.push.apply(i,l||[]),n()}function n(){for(var t,e=0;e<i.length;e++){for(var n=i[e],r=!0,a=1;a<n.length;a++){var c=n[a];0!==s[c]&&(r=!1)}r&&(i.splice(e--,1),t=o(o.s=n[0]))}return t}var r={},s={app:0},i=[];function o(e){if(r[e])return r[e].exports;var n=r[e]={i:e,l:!1,exports:{}};return t[e].call(n.exports,n,n.exports,o),n.l=!0,n.exports}o.m=t,o.c=r,o.d=function(t,e,n){o.o(t,e)||Object.defineProperty(t,e,{enumerable:!0,get:n})},o.r=function(t){"undefined"!==typeof Symbol&&Symbol.toStringTag&&Object.defineProperty(t,Symbol.toStringTag,{value:"Module"}),Object.defineProperty(t,"__esModule",{value:!0})},o.t=function(t,e){if(1&e&&(t=o(t)),8&e)return t;if(4&e&&"object"===typeof t&&t&&t.__esModule)return t;var n=Object.create(null);if(o.r(n),Object.defineProperty(n,"default",{enumerable:!0,value:t}),2&e&&"string"!=typeof t)for(var r in t)o.d(n,r,function(e){return t[e]}.bind(null,r));return n},o.n=function(t){var e=t&&t.__esModule?function(){return t["default"]}:function(){return t};return o.d(e,"a",e),e},o.o=function(t,e){return Object.prototype.hasOwnProperty.call(t,e)},o.p="/";var a=window["webpackJsonp"]=window["webpackJsonp"]||[],c=a.push.bind(a);a.push=e,a=a.slice();for(var l=0;l<a.length;l++)e(a[l]);var u=c;i.push([0,"chunk-vendors"]),n()})({0:function(t,e,n){t.exports=n("56d7")},"01ff":function(t,e,n){},"21bb":function(t,e,n){"use strict";var r=n("7a98"),s=n.n(r);s.a},4503:function(t,e,n){},"52c3":function(t,e,n){"use strict";var r=n("4503"),s=n.n(r);s.a},5377:function(t,e,n){"use strict";var r=n("6e5b"),s=n.n(r);s.a},"56d7":function(t,e,n){"use strict";n.r(e);n("cadf"),n("551c"),n("f751"),n("097d");var r=n("2b0e"),s=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{attrs:{id:"app"}},[n("router-view")],1)},i=[],o=(n("5c0b"),n("2877")),a={},c=Object(o["a"])(a,s,i,!1,null,null,null),l=c.exports,u=n("8c4f"),f=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"home"},[n("TopMenu"),!t.song&&t.notListening?n("div",{staticClass:"home__not-listening"},[t._v("\n    You're signed in to Spotify, but not listening to anything.\n    "),n("br"),n("br"),t._v("Start\n    listening on any device - your phone, tablet, or desktop!\n    "),n("br"),n("br"),t.idleMode?n("p",{staticClass:"idle-mode",on:{click:t.getCurrentSong}},[t._v("\n      It looks like you're idle! Click here to wake up SpotifyKaraoke.\n    ")]):t._e()]):t._e(),t.fetchingLyrics?n("div",{staticClass:"home__status"},[t._v("\n    Fetching lyrics...\n    "),n("p",[t._v("\n      for\n      "),n("span",[t._v(t._s(t.song.trackName))]),t._v(" by\n      "),n("span",[t._v(t._s(t.song.artist))])])]):t._e(),!t.fetchingLyrics&&t.song&&t.song.isPlaying?n("div",{ref:"lyricContainer",staticClass:"home__lyrics",on:{touchstart:t.handleLyricDrag,touchend:t.handleLyricDrag}},[n("Karaoke"),n("ProgressBar")],1):t._e()],1)},g=[],h=(n("8e6e"),n("ac6a"),n("456d"),n("a481"),n("96cf"),n("3b8d")),p=n("bd86"),d=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"top-menu",class:{hidden:t.hideInterface}},[n("ul",[t.isLoggedIn?n("li",[n("a",{on:{click:function(e){return t.showModal("settings")}}},[t._v("Settings")])]):t._e(),n("li",[n("a",{on:{click:function(e){return t.showModal("about")}}},[t._v("About")])]),n("li",[n("a",{on:{click:function(e){return t.showModal("bookmark")}}},[t._v("Bookmark")])]),n("li",[n("a",{on:{click:function(e){return t.showModal("privacy")}}},[t._v("Privacy")])]),t.isLoggedIn?n("li",[n("a",{attrs:{href:"/logout"}},[t._v("Logout")])]):t._e()]),t.isLoggedIn&&!t.settings.autoRefresh?n("button",{staticClass:"action",attrs:{href:"/auth/spotify"},on:{click:function(e){return t.$store.dispatch("getCurrentSong")}}},[n("span",[t._v("Get Lyrics")])]):t._e(),t.isLoggedIn&&t.settings.autoRefresh?n("button",{staticClass:"action",class:{disabled:!t.settings.scrollLyrics},on:{click:function(e){return t.toggleSetting("scrollLyrics")}}},[n("span",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.scrollLyrics,expression:"settings.scrollLyrics"}],attrs:{type:"checkbox"},domProps:{checked:Array.isArray(t.settings.scrollLyrics)?t._i(t.settings.scrollLyrics,null)>-1:t.settings.scrollLyrics},on:{change:function(e){var n=t.settings.scrollLyrics,r=e.target,s=!!r.checked;if(Array.isArray(n)){var i=null,o=t._i(n,i);r.checked?o<0&&t.$set(t.settings,"scrollLyrics",n.concat([i])):o>-1&&t.$set(t.settings,"scrollLyrics",n.slice(0,o).concat(n.slice(o+1)))}else t.$set(t.settings,"scrollLyrics",s)}}}),t._v("Autoscroll\n    ")])]):t._e(),t.isLoggedIn&&t.results.length>1?n("button",{staticClass:"action more-results",on:{click:function(e){return t.nextActiveLyricResult()}}},[n("span",[t._v("\n      More ("+t._s(t.activeLyricResult+1)+"/"+t._s(t.results.length)+")\n    ")])]):t._e(),n("div",{staticClass:"modal-container",class:{hidden:""===t.modal}},[n("div",{staticClass:"modal about",class:{visible:"about"===t.modal}},[n("div",{staticClass:"modal-close",on:{click:function(e){return t.showModal()}}},[t._v("x")]),t._m(0),n("p",[t._v("\n        This site was born out of necessity - while listening\n        to music, I often wanted to pull up lyrics. Unfortunately,\n        lyric sites are typically packed with ads, malware, and\n        overall aggravating features that took far too much time.\n      ")]),t._m(1),t._m(2)]),n("div",{staticClass:"modal bookmark",class:{visible:"bookmark"===t.modal}},[n("div",{staticClass:"modal-close",on:{click:function(e){return t.showModal()}}},[t._v("x")]),n("h4",[t._v("Adding SpotifyKaraoke to your iOS Home Screen")]),n("p",[t._v("\n        Here's a neat way to get instant lyrics - add it to your\n        home screen. That way, you have one-button access to lyrics\n        for whatever it is you're listening to.\n      ")]),n("b",[t._v("Step 1")]),n("br"),n("p",[t._v("\n        Open SpotifyKaraoke in Safari.\n      ")]),n("b",[t._v("Step 2")]),n("br"),t._m(3),n("b",[t._v("Step 3")]),n("br"),t._m(4),n("b",[t._v("Step 4")]),n("br"),t._m(5)]),n("div",{staticClass:"modal privacy",class:{visible:"privacy"===t.modal}},[n("div",{staticClass:"modal-close",on:{click:function(e){return t.showModal()}}},[t._v("x")]),n("h4",[t._v("tl;dr")]),t._m(6),n("p",[t._v("\n        Thanks for reading, and I  truly hope you get as much use out\n        of it as I do!  -Gedrick\n      ")]),n("h4",[t._v("Cookie Usage")]),n("p",[t._v("\n        There are three cookies set on SpotifyKaraoke, all of which are\n        used solely for managing your logged-in status:\n      ")]),t._m(7),t._m(8),t._m(9),n("h4",[t._v("Tracking")]),t._m(10)]),n("div",{staticClass:"modal settings",class:{visible:"settings"===t.modal}},[n("div",{staticClass:"modal-close",on:{click:function(e){return t.showModal()}}},[t._v("x")]),n("p",[n("input",{directives:[{name:"model",rawName:"v-model",value:t.settings.autoRefresh,expression:"settings.autoRefresh"}],attrs:{type:"checkbox",name:"autoRefresh",id:"autoRefresh"},domProps:{checked:Array.isArray(t.settings.autoRefresh)?t._i(t.settings.autoRefresh,null)>-1:t.settings.autoRefresh},on:{change:function(e){var n=t.settings.autoRefresh,r=e.target,s=!!r.checked;if(Array.isArray(n)){var i=null,o=t._i(n,i);r.checked?o<0&&t.$set(t.settings,"autoRefresh",n.concat([i])):o>-1&&t.$set(t.settings,"autoRefresh",n.slice(0,o).concat(n.slice(o+1)))}else t.$set(t.settings,"autoRefresh",s)}}}),n("label",{attrs:{for:"autoRefresh"}},[t._v(" Auto-Refresh")]),n("br"),t._v("This will continuously ping Spotify to see what you're\n        listening to. Turning off this feature will disable\n        "),n("b",[t._v("Karaoke Mode")]),t._v(" and will\n        prevent SpotifyKaraoke from automatically grabbing lyrics when a new\n        song starts to play.\n        "),n("br"),n("br"),t._v("However, it will show a button to manually update the\n        lyrics to match your current song.\n      ")])])])])},y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        Hey there! Thanks for checking out\n        "),n("span",[t._v("SpotifyKaraoke")]),t._v(".\n      ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        What I wanted was a site that I could bookmark, and pull\n        up at any time to see lyrics to whatever I was listening\n        to at the time. And thus,\n        "),n("span",[t._v("SpotifyKaraoke")]),t._v(" was born.\n      ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        The site is written in Vuejs with Node on the backend. It\n        is open-source. Check out the Github page\n        "),n("a",{attrs:{href:"https://github.com/gedrick/SpotifyKaraoke",target:"_blank"}},[t._v("here")]),t._v(". It uses the Spotify API and\n        "),n("a",{attrs:{href:"https://genius.com/developers",target:"_blank"}},[t._v("Genius")]),t._v(" for fetching\n        the lyrics.\n      ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        Click the "),n("i",[t._v("Share")]),t._v(" button."),n("br"),n("img",{attrs:{src:"/share.png"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        Click "),n("i",[t._v("Add to Home Screen")]),t._v("."),n("br"),n("img",{attrs:{src:"/add-to-home.png"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        All done! You now have a one-tap icon to instant lyrics."),n("br"),n("img",{attrs:{src:"/icon.png"}})])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        SpotifyKaraoke is a small utility project specifically built out\n        of need. I can't stand companies selling my data any less than you\n        do, so the minimal amount\n        of information collected is purely for site functionality.\n        SpotifyKaraoke is merely a side project for a full time\n        developer. In fact the whole thing is open source, so if you don't\n        trust that I'm not stealing your identity, feel free to look at\n        "),n("a",{attrs:{href:"https://github.com/gedrick/SpotifyKaraoke",target:"_blank"}},[t._v("\n        the source code")]),t._v(" :)\n      ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("b",[t._v("isLoggedIn:")]),t._v(" convenience cookie so the app\n        knows you are logged in, so it may forward you to the right\n        page.\n      ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("b",[t._v("user.token:")]),t._v(" passed back from Spotify (httponly) and used\n        to query Spotify and find your current track.\n      ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[n("b",[t._v("user.refresh:")]),t._v(" passed back from Spotify (httponly) and\n        used to refresh your token in the event that your token times out.\n      ")])},function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("p",[t._v("\n        A non-invasive tracker is used purely\n        to see how many people are using the site. This is\n        used to determine if it's worth the time of upkeep. The service\n        used is\n        "),n("a",{attrs:{href:"https://www.goatcounter.com/",target:"_blank"}},[t._v("GoatCounter")]),t._v(" which does not track any personally identifiable\n        information. Read their privacy policy\n        "),n("a",{attrs:{href:"https://www.goatcounter.com/privacy",target:"_blank"}},[t._v("here")]),t._v(".\n      ")])}],v=n("2f62");function m(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function b(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?m(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):m(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var _={data:function(){return{modal:""}},computed:b({},Object(v["e"])(["settings","results","activeLyricResult","hideInterface"]),{isLoggedIn:function(){return this.$cookies.get("loggedIn")}}),methods:b({},Object(v["d"])(["toggleSetting","nextActiveLyricResult"]),{showModal:function(t){this.modal=t||""}})},k=_,w=(n("52c3"),Object(o["a"])(k,d,y,!1,null,"611f89ea",null)),O=w.exports,j=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.song&&t.song.isPlaying?n("div",{staticClass:"karaoke",on:{click:t.toggleInterface}},[n("div",{staticClass:"gradient top"}),t.lyrics&&!t.songHasNoLyrics?n("div",{staticClass:"karaoke__lyrics",domProps:{innerHTML:t._s(t.parsedLyrics)}}):t._e(),t.songHasNoLyrics?n("div",{staticClass:"karaoke__no-lyrics"},[t._v("\n    Sorry, this song doesn't have lyrics\n  ")]):t._e(),n("div",{staticClass:"gradient"})]):t._e()},L=[];function S(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function P(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?S(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):S(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var C={name:"Karaoke",data:function(){return{artist:null,trackName:null}},computed:P({},Object(v["c"])(["currentLyrics"]),{},Object(v["e"])(["song","results","lyrics","activeLyricResult"]),{parsedLyrics:function(){return!!this.currentLyrics&&this.currentLyrics.replace(/\n/g,"<br>")},songHasNoLyrics:function(){return!(!(this.song.isPlaying&&this.song.duration>0)||this.currentLyrics)}}),methods:P({},Object(v["d"])(["toggleInterface"]))},I=C,R=(n("ff8f"),Object(o["a"])(I,j,L,!1,null,"07f53c8c",null)),$=R.exports,T=function(){var t=this,e=t.$createElement,n=t._self._c||e;return t.song&&t.song.isPlaying?n("div",{staticClass:"progress-bar"},[n("div",{staticClass:"progress-bar__title"},[t._v(t._s(t.title))]),t.settings.autoRefresh?n("div",{staticClass:"progress-bar__progress",style:{width:t.progress+"%"}},[t._v("\n     \n  ")]):t._e()]):t._e()},M=[];function x(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function E(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?x(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):x(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var A={computed:E({},Object(v["e"])(["song","settings"]),{progress:function(){var t=this.song.progress,e=this.song.duration,n=t/e*100;return Math.round(n)},title:function(){return"".concat(this.song.artist," - ").concat(this.song.trackName)}})},D=A,N=(n("dee8"),Object(o["a"])(D,T,M,!1,null,null,null)),K=N.exports;function H(t,e){var n=Object.keys(t);if(Object.getOwnPropertySymbols){var r=Object.getOwnPropertySymbols(t);e&&(r=r.filter((function(e){return Object.getOwnPropertyDescriptor(t,e).enumerable}))),n.push.apply(n,r)}return n}function q(t){for(var e=1;e<arguments.length;e++){var n=null!=arguments[e]?arguments[e]:{};e%2?H(Object(n),!0).forEach((function(e){Object(p["a"])(t,e,n[e])})):Object.getOwnPropertyDescriptors?Object.defineProperties(t,Object.getOwnPropertyDescriptors(n)):H(Object(n)).forEach((function(e){Object.defineProperty(t,e,Object.getOwnPropertyDescriptor(n,e))}))}return t}var G={name:"home",components:{TopMenu:O,Karaoke:$,ProgressBar:K},data:function(){return{queryTimer:null,idleCounter:0,idleThreshold:30,idleMode:!1,positionModifier:0,notListening:!0,fetchingLyrics:!1,userIsDraggingLyrics:!1}},computed:q({},Object(v["e"])(["song","lyrics","settings"]),{songPercentage:function(){if(!this.song)return 0;var t=this.song.progress,e=this.song.duration,n=t/e*100;return Math.round(n)},isLoggedIn:function(){return this.$cookies.get("loggedIn")}}),methods:q({},Object(v["d"])(["setUser"]),{},Object(v["b"])(["getCurrentSong","getLyrics"]),{handleLyricDrag:function(t){this.userIsDraggingLyrics="touchstart"===t.type},startInterval:function(t){var e=this;window.clearInterval(this.queryTimer),this.queryTimer=setInterval(Object(h["a"])(regeneratorRuntime.mark((function t(){return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:if(!e.settings.autoRefresh){t.next=4;break}return t.next=3,e.getCurrentSong();case 3:e.song||e.idleMode?e.settings.scrollLyrics&&e.$refs.lyricContainer&&!e.userIsDraggingLyrics&&e.scrollLyricsToPosition():(e.idleCounter++,e.idleCounter>=e.idleThreshold&&(e.idleMode=!0,window.clearInterval(e.queryTimer)));case 4:case"end":return t.stop()}}),t)}))),t)},scrollLyricsToPosition:function(){var t=this.$refs.lyricContainer.scrollTop,e=this.calculateScrollAdjustment();this.$refs.lyricContainer.scrollTop=t+e},calculateScrollAdjustment:function(){var t=this.$refs.lyricContainer,e=t.offsetHeight,n=.4*window.innerHeight,r=e-n,s=this.song.duration/1e3,i=Math.ceil(r/s),o=4*i;return o}}),mounted:function(){this.isLoggedIn||this.$router.push({path:"login"}),this.startInterval(2e3)},beforeDestroy:function(){window.clearTimeout(this.queryTimer)},watch:{song:{immediate:!0,handler:function(){var t=Object(h["a"])(regeneratorRuntime.mark((function t(e){var n,r=this;return regeneratorRuntime.wrap((function(t){while(1)switch(t.prev=t.next){case 0:e?(this.idleMode||e.artist&&e.trackName&&(e.artist!==this.artist||e.trackName!==this.trackName))&&(this.idleMode=!1,this.idleCounter=0,this.startInterval(2e3),this.notListening=!1,this.artist=e.artist,this.trackName=e.trackName,this.fetchingLyrics=!0,n=this.song.trackName,n=n.replace(/remaster(?:ed)? \d{2,4}/i,""),n=n.replace(/\d{2,4} remaster(?:ed)?/i,""),n=n.replace(/remaster(?:ed)?/i,""),this.getLyrics({query:"".concat(this.song.artist," ").concat(n)}).then((function(){r.fetchingLyrics=!1}))):(this.notListening=!0,this.startInterval(2e3),this.fetchingLyrics=!1);case 1:case"end":return t.stop()}}),t,this)})));function e(e){return t.apply(this,arguments)}return e}()}}},B=G,U=(n("21bb"),Object(o["a"])(B,f,g,!1,null,null,null)),F=U.exports,J=function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"signin"},[n("TopMenu"),t._m(0),n("div",{staticClass:"image",style:{backgroundImage:"url('/background-image.png')"}})],1)},Y=[function(){var t=this,e=t.$createElement,n=t._self._c||e;return n("div",{staticClass:"text"},[n("div",{staticClass:"inner"},[n("h1",[t._v("Spotify Karaoke")]),n("h3",[t._v("Instant lyrics for whatever you're listening to!")]),n("div",{staticClass:"signin-login"},[n("a",{attrs:{href:"/auth/spotify"}},[n("button",{staticClass:"action",attrs:{href:"/auth/spotify"}},[n("span",[t._v("Sign in with Spotify")])])])]),n("div",{staticClass:"signin-info"},[n("p",[t._v("\n          Note: by signing into this site with your Spotify account,\n          we will receive absolutely\n          "),n("i",[t._v("no")]),t._v(" personal information. The only permission scope\n          required for this service is\n          "),n("b",[n("a",{attrs:{href:"https://developer.spotify.com/documentation/general/guides/scopes/#user-read-playback-state",target:"_blank"}},[t._v("user-read-playback-state")])]),t._v("\n          for the purpose of fetching the song you are currently listening\n          to. For more information, please see the rest of the\n          "),n("a",{attrs:{href:"https://developer.spotify.com/documentation/general/guides/scopes/",target:"_blank"}},[t._v("Spotify API documentation")]),t._v(".\n        ")])])])])}],V={components:{TopMenu:O}},W=V,z=(n("5377"),Object(o["a"])(W,J,Y,!1,null,"3de2eefb",null)),Q=z.exports;r["a"].use(u["a"]);var X=new u["a"]({routes:[{path:"/",name:"home",component:F},{path:"/login",name:"login",component:Q}]}),Z=(n("7f7f"),n("bc3a")),tt=n.n(Z);r["a"].use(v["a"]);var et={hideInterface:!1,song:null,lyrics:null,results:[],settings:{scrollLyrics:!0,autoRefresh:!0},activeLyricResult:0},nt={currentLyrics:function(t){return!!t.results.length&&(t.results[t.activeLyricResult].lyrics||0)}},rt={toggleInterface:function(t){t.hideInterface=!t.hideInterface},toggleSetting:function(t,e){var n=t.settings[e];r["a"].set(t.settings,e,!n)},setSong:function(t,e){var n=e.song;r["a"].set(t,"song",n)},setLyrics:function(t,e){var n=e.lyrics;r["a"].set(t,"lyrics",n),r["a"].set(t,"activeLyricResult",0)},setAllLyricResults:function(t,e){var n=e.results;r["a"].set(t,"results",n)},nextActiveLyricResult:function(t){var e=0;t.activeLyricResult+1<t.results.length&&(e=t.activeLyricResult+1),r["a"].set(t,"activeLyricResult",e)}},st={getCurrentSong:function(t){var e=t.commit;return new Promise((function(t,n){tt.a.get("/api/getCurrentSong").then((function(r){var s=r.data;if(s.err)return n(s.err);var i,o=s.result.body;return i=o.is_playing?{album:o.item.album.name,artist:o.item.artists[0].name,trackName:o.item.name,progress:o.progress_ms,duration:o.item.duration_ms,isPlaying:!0}:null,e("setSong",{song:i}),t()})).catch((function(){return console.log("getCurrentSong failed"),e("setSong",{song:{isPlaying:!1}}),t()}))}))},getLyrics:function(t,e){var n=t.commit,r=e.query;return n("setLyrics",{lyrics:""}),new Promise((function(t,e){tt.a.get("/api/getLyrics?query=".concat(r)).then((function(e){var r=e.data,s=r[0],i=s.lyrics;if(!i)throw new Error;n("setLyrics",{lyrics:i}),n("setAllLyricResults",{results:e.data}),t()})).catch((function(t){n("setLyrics",{lyrics:null}),e(t)}))}))}},it=new v["a"].Store({state:et,getters:nt,mutations:rt,actions:st}),ot=n("2b27"),at=n.n(ot);r["a"].config.productionTip=!1,r["a"].use(at.a),new r["a"]({router:X,store:it,render:function(t){return t(l)}}).$mount("#app")},"57d3":function(t,e,n){},"5c0b":function(t,e,n){"use strict";var r=n("e332"),s=n.n(r);s.a},"6e5b":function(t,e,n){},"7a98":function(t,e,n){},dee8:function(t,e,n){"use strict";var r=n("57d3"),s=n.n(r);s.a},e332:function(t,e,n){},ff8f:function(t,e,n){"use strict";var r=n("01ff"),s=n.n(r);s.a}});
//# sourceMappingURL=app.08810712.js.map